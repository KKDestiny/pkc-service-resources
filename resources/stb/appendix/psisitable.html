<!DOCTYPE HTML>
<!--
	Halcyonic by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>PSI/SI表结构分析 - PSI/SI专题 | OneLib智库,为您定制私人智库</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="../assets/css/onelib.css" />
		<link rel="stylesheet" href="../assets/css/main.css" />
		<link rel="stylesheet" href="../assets/css/font-awesome.min.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<link href="../images/structure/logo.ico" media="screen" rel="shortcut icon" type="image/​x-icon">
	</head>
	
	
	<body class="subpage" data-spy="scroll" data-target="#myScrollspy">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">
						<div class="row">
							<div class="12u">

								<!-- Logo -->
								<h1>
									<a href="/blog/stb" id="logo">
										<img alt="Brand" src="../images/logo_sm.png" style='height:40px; margin-top:-3px;'>
									</a>
								</h1>

								<!-- Nav -->
								<nav id="nav">
									<a href="../index.html">首页</a>
									<a href="../psisi.html">PSI/SI教程</a>
									<a href="../knowledge.html">机顶盒知识点</a>
									<a href="index.html">资料快查</a>
								</nav>

							</div>
						</div>
					</header>
				</div>

			<!-- Content -->
				<div id="content-wrapper">
					<div id="content">
						<div class="container">
							<div class="row">
								<div class="3u 12u(mobile)">

									<!-- Sidebar -->
										
										<section>
											<header>
												<h2>PSI/SI资料快查</h2>
												<p class='light-text'>资料入口</p>
											</header>
											<a class="feature-image"><img src="../images/pic05.jpg" alt="" /></a>
											<p>
												这里是PSI/SI相关资料的主入口，
												你有任何需要查询的资料，都可以从这里开始寻找...
											</p>
											<ul class="link-list">
												<li><a href="index.html" class='bold'>首页</a> <span class='light-text small'>返回首页</span></li>
												<br>
												
												<li style='font-weight:bold;'>基础</li>
												<li><a href="dictionary.html" target='_blank'>PSI/SI名词速查</a></li>
												<li><a href="ts.html" target='_blank'>TS流的制作、传输及解析</a></li>
												<br>
												
												<li style='font-weight:bold;'>PSI信息</li>
												<li>
													<a href="psisitable.html#pat" target='_blank'>PAT表</a>、
													<a href="psisitable.html#pmt" target='_blank'>PMT表</a>、
													<a href="psisitable.html#nit" target='_blank'>NIT表</a>、
													<a href="psisitable.html#cat" target='_blank'>CAT表</a>
												</li>
												<br>
												
												<li style='font-weight:bold;'>SI信息</li>
												<li>
													<a href="psisitable.html#sdt" target='_blank'>SDT表</a>、
													<a href="psisitable.html#eit" target='_blank'>EIT表</a>、
													<a href="psisitable.html#tdt" target='_blank'>TDT表</a>、
													<a href="psisitable.html#bat" target='_blank'>BAT表</a>、
													<a href="psisitable.html#tot" target='_blank'>TOT表</a>、
													<a href="psisitable.html#rts" target='_blank'>RST表</a>、
													<a href="psisitable.html#sit" target='_blank'>SIT表</a>、
													<a href="psisitable.html#st" target='_blank'>ST表</a>、
													<a href="psisitable.html#dit" target='_blank'>DIT表</a>
												</li>
												<br>
												
												<li style='font-weight:bold;'>描述子Descriptor列表</li>
												<li>
													<a href="descriptor.html" target='_blank'>进入详细列表</a>
												</li>
												<br>
												
												<li style='font-weight:bold;'>表格</li>
												<li>
													<a href="table.html" target='_blank'>进入详细列表</a>
												</li>
											</ul>
											
											<br>
											<p class='author'>
												<br>
												本资料集由 林晓州 收集和整理，并提供共享。
												<br>邮箱： 1139904786@qq.com
												<br>网址： <a href='http://www.onelib.biz' target='_blank'>http://www.onelib.biz</a>
											</p>
											<br>
											<p class='copyright'>
												<span style='font-weight:bold;'>版权声明</span>：未经许可，请勿转载！
											</p>
											<br>
											<p class='website'>
												<br>
												©2016 · OneLib智库 · 分享知识和经验，打造精品智库平台
											</p>
										</section>
										
										
										<section id="myScrollspy" style='padding: 5px;'>
											<nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm" id="ol_tasklist_guide">
												
												<header style='padding-top:25px; margin:0;'>
													<h2>本页导航</h2>
													<p class='light-text'>PSI/SI表结构分析</p>
												</header>
												
												<ul class="nav bs-docs-sidenav" style=';'>
													<li class="active">
														<a href="#pat"><span class='fa fa-tags'></span> PAT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#pat1"><span class='fa fa-chevron-right'></span> PAT表结构</a></li>
															<li class=""><a href="#pat2"><span class='fa fa-chevron-right'></span> PAT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#pmt"><span class='fa fa-tags'></span> PMT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#pmt1"><span class='fa fa-chevron-right'></span> PMT表结构</a></li>
															<li class=""><a href="#pmt2"><span class='fa fa-chevron-right'></span> PMT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#cat"><span class='fa fa-tags'></span> CAT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#cat1"><span class='fa fa-chevron-right'></span> CAT表的结构分析</a></li>
															<li class=""><a href="#cat2"><span class='fa fa-chevron-right'></span> CAT表的描述子</a></li>
															<li class=""><a href="#cat3"><span class='fa fa-chevron-right'></span> CAT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#nit"><span class='fa fa-tags'></span> NIT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#nit1"><span class='fa fa-chevron-right'></span> NIT表的结构分析</a></li>
															<li class=""><a href="#nit2"><span class='fa fa-chevron-right'></span> NIT表中的描述子</a></li>
															<li class=""><a href="#nit3"><span class='fa fa-chevron-right'></span> NIT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#sdt"><span class='fa fa-tags'></span> SDT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#sdt1"><span class='fa fa-chevron-right'></span> SDT表的结构分析</a></li>
															<li class=""><a href="#sdt2"><span class='fa fa-chevron-right'></span> SDT表的描述子</a></li>
															<li class=""><a href="#sdt3"><span class='fa fa-chevron-right'></span> SDT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#eit"><span class='fa fa-tags'></span> EIT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#eit1"><span class='fa fa-chevron-right'></span> EIT表的结构分析</a></li>
															<li class=""><a href="#eit2"><span class='fa fa-chevron-right'></span> EIT表的描述子</a></li>
															<li class=""><a href="#eit3"><span class='fa fa-chevron-right'></span> EIT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#tdt"><span class='fa fa-tags'></span> TDT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#tdt1"><span class='fa fa-chevron-right'></span> TDT表的结构分析</a></li>
															<li class=""><a href="#tdt2"><span class='fa fa-chevron-right'></span> TDT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#tot"><span class='fa fa-tags'></span> TOT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#tot1"><span class='fa fa-chevron-right'></span> TOT表的结构分析</a></li>
															<li class=""><a href="#tot2"><span class='fa fa-chevron-right'></span> TOT表的描述子</a></li>
															<li class=""><a href="#tot3"><span class='fa fa-chevron-right'></span> TOT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#bat"><span class='fa fa-tags'></span> BAT表解析</a>
														<ul class="nav" style='margin:0px; padding-bottom:3px;'>
															<li class=""><a href="#bat1"><span class='fa fa-chevron-right'></span> BAT表的结构分析</a></li>
															<li class=""><a href="#bat2"><span class='fa fa-chevron-right'></span> BAT表的描述子</a></li>
															<li class=""><a href="#bat3"><span class='fa fa-chevron-right'></span> BAT表实例</a></li>
														</ul>
													</li>
													<li>
														<a href="#partz"><span class='fa fa-tags'></span> 本章小结</a>
													</li>
													<li>
														<a href="#party"><span class='fa fa-tags'></span> 参考文档</a>
													</li>
													<li>
														<a href="#partx"><span class='fa fa-tags'></span>  版本信息</a>
													</li>
												</ul>
											</nav>
										</section>

								</div>
								<div class="9u 12u(mobile) important(mobile)">

									<!-- Main Content -->
										<section>
											<header>
												<h2>PSI/SI表结构分析</h2>
												<p class='light-text'>解析PSI/SI里的各表结构</p>
											</header>
											<p class='paper'>
												本章主要针对PSI/SI里的PAT、PMT、CAT、NIT以及SDT、EIT、TDT、TOT、BAT等表的结构进行解析。
												本资料主要参考了European Standard提供的英文文档《En300468.V1.7.1_Specification for SI in DVB Systems》
												和国家广播电影电视总局提供的中文文档《数字视频广播中文业务信息规范》。
											</p>
											<p class='paper'>
												本章中，每小节的结构：概述该表，列举该表的PID、存储信息的段table_id，
												之后会给出表结构、存在的描述子，描述子不在此展开分析，需要查看的话可点开链接进入描述子专项资料页面，
												最后会给出一个或多个实际案例来分析各表。
											</p>
										</section>
									
										
										<section id='pat'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>PAT表解析</span></a></h2>
												<p class='light-text'>Parse PAT(Program Association Table)</p>
											</header>
											<blockquote>
												"PAT是机顶盒接收的入口点，是它获取数据的开始"
												<footer class='italic'>PAT表主要提供Program和PID之间的对应关系。 </footer>
												<footer class='italic'>PID = 0x0000</footer>
												<footer class='italic'>table_id = 0x00</footer>
											</blockquote>
											
											<h3 id='pat1' class='subtitle-border'>PAT表结构</h3>
											<p class=''>
												下表是PAT结构：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%;text-align:center;'>
													<thead>
														<tr style='font-weight:bold; background:#bbb; color:#000;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>program_association_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>"0"</td><td>1</td><td>bslbf</td><td>zero</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">段长度，12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>transport_stream_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">transport_stream_id</h3><p class="pop-text">16位, 给出TS的识别号</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Version_number</td><td>5</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Version_number</h3><p class="pop-text">sub_table的版本号，值为0~31，当sub_table信息改变时，值加1，若值已为31，则变化后值为0（循环），若curren_next_indicator的值为“1”，version_number指当前sub_table,若curren_next_indicator的值为“0”，version_number指下一个sub_table</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Current_next_indicator</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Current_next_indicator</h3><p class="pop-text">当前后续指示符，1位，“1”指sub_table是current, “0”指sub_table是next</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_number</h3><p class="pop-text">段号，8位,给出section号，在sub_table中，第一个section其section_number为"0x00"，每增加一个section，section_number加一</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>last_section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">last_section_number</h3><p class="pop-text">最后段号，sub_table中最后一个section的section_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>program_number</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">program_number</h3><p class="pop-text">节目号，16位,指定了Program_map_PID可用的节目。若其值为0x0000，则接下来的13bits的PID是network_PID，否则为program_map_PID</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>reserved</td><td>3</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>if(program_number == 0){</td></tr>
													<tr><td style='text-indent:8em; text-align:left;'>network_PID</td><td>13</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">network_PID</h3><p class="pop-text">13位, 指定了包含NIT的TS包的PID，其值由用户定义</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>}</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>else{</td></tr>
													<tr><td style='text-indent:8em; text-align:left;'>program_map_PID</td><td>13</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">program_map_PID</h3><p class="pop-text">13位,指定了TS包的PID，这些TS包包含由program_number指定的program_map_section，其值由用户定义</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>}</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>CRC_32</td><td>32</td><td>rpchof</td><td><a data-content='<h3 class="pop-title">CRC_32</h3><p class="pop-text">32位, 表示CRC的值</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<p>
												这里我们注意关注五个字段：<br>
												<ul class='paper'>
													<li><span class='bold'>table_id</span>：PAT的table_id应为0x00</li>
													<li><span class='bold'>transport_stream_id（传输流标志）</span>：用以标识来源于网络中任何其他复合流的TS流</li>
													<li><span class='bold'>program_number（节目号）</span>：规定program_map_PID可适用的节目。当值为0x0000时，其后的PID参照将是网络PID。它可以作为一个指示符号，例如用于广播通道。</li>
													<li><span class='bold'>network_PID（网络PID）</span>：仅当program_number为0x00时使用</li>
													<li><span class='bold'>program_map_PID（节目映射PID）</span>：据此找出相应的PMT表</li>
												</ul>
											</p>
											<br>
											
											<h3 id='pat2' class='subtitle-border'>PAT表实例</h3>
											<p class='paper'>
												在下图中，我们可以看到PAT表携带的基本信息。
											</p>
											<a class="feature-image"><img src="../course/images/16.jpg" style="margin-top:-10px" />PAT表一览</a>
											<p class='paper'>
												首先，table_id=0x0。网络信息表的PID为0x10。网络中有四路节目，并给出了每个节目的program_number以及每个节目的PMT PID。
												在解析完PAT表后，就可以根据这里得到的四个PMT PID去过滤对应PID号的PMT表，从而得到每个节目的更详细信息。
											</p>
											
										</section>
									
										
										<section id='pmt'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>PMT表解析</span></a></h2>
												<p class='light-text'>Parse PMT(Program Map Table)</p>
											</header>
											<blockquote>
												"PMT是连接节目号与节目元素的桥梁"
												<footer class='italic'>PMT表主要提供节目numbers和节目elements之间的映射关系。 </footer>
												<footer class='italic'>PID = 值由编码器选择</footer>
												<footer class='italic'>table_id = 0x02</footer>
											</blockquote>
											<p class='paper'>
												<span class='bold'>节目映射表PMT的意义在于，它给出了节目号与组成这个节目元素之间的映射；</span>
												也就是说，PMT是连接节目号与节目元素的桥梁。
												
												我们知道，一个电视节目至少包含了视频和音频数据，而每一个节目的视音频数据都是以包的形式在TS流中传输的；
												所以说，一个TS流包含了多个节目的视频和音频数据包。
												要想过滤出一个TS流中其中一个节目的视频和音频，则需要知道这个节目中视频和音频的标识号PID。
												PMT表的作用就在于，它提供了每个节目视频、音频（或其他）数据包的PID。
											</p>
											<br>
											
											<h3 id='pmt1' class='subtitle-border'>PMT表结构</h3>
											<p class=''>
												下表是PMT结构：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='text-align:center; font-weight:bold; background:#bbb; color:#000;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>program_map_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>"0"</td><td>1</td><td>bslbf</td><td>zero</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">段长度，12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>program_number</td><td>16</td><td>uimsbf</td><td>节目号，与service_id对应</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Version_number</td><td>5</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Version_number</h3><p class="pop-text">sub_table的版本号，值为0~31，当sub_table信息改变时，值加1，若值已为31，则变化后值为0（循环），若curren_next_indicator的值为“1”，version_number指当前sub_table,若curren_next_indicator的值为“0”，version_number指下一个sub_table</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Current_next_indicator</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Current_next_indicator</h3><p class="pop-text">当前后续指示符，1位，“1”指sub_table是current, “0”指sub_table是next</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_number</h3><p class="pop-text">段号，8位,给出section号，在sub_table中，第一个section其section_number为"0x00"，每增加一个section，section_number加一</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>last_section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">last_section_number</h3><p class="pop-text">最后段号，sub_table中最后一个section的section_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>reserved</td><td>3</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>PCR_PID</td><td>13</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">PCR_PID</h3><p class="pop-text">13位, 指定了包含NIT的TS包的PID</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>reserved</td><td>4</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>program_info_length</td><td>12</td><td>uimsbf</td><td>头两位为“00”</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left; font-weight:bold;'>descriptor()</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N1;i++){</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>stream_type</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">stream_type</h3><p class="pop-text">8位,指定了节目element的类型</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>reserved</td><td>3</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>elementary_PID</td><td>13</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">elementary_PID</h3><p class="pop-text">13位,指定了包含program element的TS包的PID</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>reserved</td><td>4</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>ES_info_length</td><td>12</td><td>uimsbf</td><td>头两位为"00"</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>for(i=0;i&lt;N2;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:8em; text-align:left; font-weight:bold;'>descriptor()</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>}</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>CRC_32</td><td>32</td><td>rpchof</td><td><a data-content='<h3 class="pop-title">CRC_32</h3><p class="pop-text">32位, 表示CRC的值</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<p>
												注意到，PMT表中有两个地方有Descriptor():<br>
												<ul class='paper'>
													<li><span class='bold'>Mosaic descriptor</span>：<a href='descriptor.html#mosaic_descriptor' target='_blank'>查看！！</a></li>
													<li><span class='bold'>Service move descriptor</span>：<a href='descriptor.html#service_move_descriptor' target='_blank'>查看！！</a></li>
													<li><span class='bold'>Stream identifier descriptor</span>：<a href='descriptor.html#stream_identifier_descriptor' target='_blank'>查看！！</a></li>
													<li><span class='bold'>Teletext descriptor</span>：<a href='descriptor.html#teletext_descriptor' target='_blank'>查看！！</a></li>
												</ul>
											</p>
											<br>
											
											<h3 id='pmt2' class='subtitle-border'>PMT表实例</h3>
											<p class='paper'>
												在下图中，我们可以看到PMT表携带的基本信息。一共有四个section，是四张PMT表的信息；其中，每个section存储在一个PMT表中，对应了一个节目的信息。
												下面，我们以节目号为16398的节目为例进行分析。
											</p>
											<a class="feature-image"><img src="../course/images/17.jpg" style="margin-top:-10px" />PMT表一览</a>
											
											<p class='paper'>
												下图可以看到，一共有3个单元流，每一个单元流都是组成这个节目的一个
												<abbr title='一个电视节目至少包含一个视频、一个音频，还可以有Teletext、字幕、其他音轨等分量；一个广播节目可以仅有音频'>元素(或者说是分量)</abbr>。
												可以看到，这个节目包含一个MPEG2的视频(stream_type=0x02)、一个MPEG2的音频(stream_type=0x04)以及一个<abbr title='这里需要继续看下一层，其实是一个Teletext'>私有类型(stream_type=0x06)的数据</abbr>。
											</p>
											<a class="feature-image"><img src="../course/images/18.jpg" style="margin-top:-10px" />节目号为16398的节目</a>
											<p class='paper'>
											下表是stream_type值的规定：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover table-bordered' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='text-align:center; font-weight:bold; background:#bbb; color:#000;'><td>stream_type</td><td>描述</td></tr>
													</thead>
													<tr><td>0x00</td><td>ITU-T | ISO/IEC Reserved，国际标准保留</td></tr>
													<tr><td>0x01</td><td>ISO/IEC 11172 Video，视频</td></tr>
													<tr><td>0x02</td><td>ITU-T Rec. H.262 | ISO/IEC 13818-2 Video or ISO/IEC 11172-2 constrained parameter video stream，视频或受限参数视频流</td></tr>
													<tr><td>0x03</td><td>ISO/IEC 11172 Audio，音频</td></tr>
													<tr><td>0x04</td><td>ISO/IEC 13818-3 Audio，音频</td></tr>
													<tr><td>0x05</td><td>ITU-T Rec. H.222.0 | ISO/IEC 13818-1 private_sections</td></tr>
													<tr><td>0x06</td><td>ITU-T Rec. H.222.0 | ISO/IEC 13818-1 PES packets containing private data,包含专用数据的PES分组</td></tr>
													<tr><td>0x07</td><td>ISO/IEC 13522 MHEG</td></tr>
													<tr><td>0x08</td><td>ITU-T Rec. H.222.0 | ISO/IEC 13818-1 Annex A DSM CC</td></tr>
													<tr><td>0x09</td><td>ITU-T Rec.H.222.1</td></tr>
													<tr><td>0x0A</td><td>ISO/IEC 13818-6 type A</td></tr>
													<tr><td>0x0B</td><td>ISO/IEC 13818-6 type B</td></tr>
													<tr><td>0x0C</td><td>ISO/IEC 13818-6 type C</td></tr>
													<tr><td>0x0D</td><td>ISO/IEC 13818-6 type D</td></tr>
													<tr><td>0x0E</td><td>ISO/IEC 13818-1 auxiliary</td></tr>
													<tr><td>0x0F - 0x7F</td><td>ITU-T Rec. H.222.0 | ISO/IEC 13818-1 Reserved，GB/T保留</td></tr>
													<tr><td>0x80 - 0xFF</td><td>User Private，用户专用</td></tr>
												</table>
											</div>
											
											<p class='paper'>
												该节目的单元流2是音频分量的信息，可以看出，该音频语言为“deu”，即德语；其audio_type=0x1。
												单元流3是Teletext分类，其语言编码也是“deu”，teletext_type=0x1。下面给出了teletext_type值的规定：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover table-bordered' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='text-align:center; font-weight:bold; background:#bbb; color:#000;'><td>teletext_type</td><td>描述</td></tr>
													</thead>
													<tr><td>0x00</td><td>保留</td></tr>
													<tr><td>0x01</td><td>initial Teletext page</td></tr>
													<tr><td>0x02</td><td>Teletext subtitle page</td></tr>
													<tr><td>0x03</td><td>additional information page</td></tr>
													<tr><td>0x04</td><td>programme schedule page</td></tr>
													<tr><td>0x05</td><td>Teletext subtitle page for hearing impaired people，听障人士Teletext字幕</td></tr>
													<tr><td>0x06 - 0x1F</td><td>保留</td></tr>
												</table>
											</div>
											<a class="feature-image"><img src="../course/images/19.jpg" style="margin-top:-10px" />节目号为16398的节目的单元流2和单元流3</a>
										</section>
									
										
										<section id='cat'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>CAT表解析</span></a></h2>
												<p class='light-text'>Parse CAT(Program Map Table)</p>
											</header>
											<blockquote>
												"CAT描述了节目的加密方式"
												<footer class='italic'>CAT表主要提供关于Bouquet的信息，Bouquet是一个services的集合。</footer>
												<footer class='italic'>PID = 0x0001</footer>
												<footer class='italic'>table_id = 0x01</footer>
											</blockquote>
											<p class='paper'>
												条件接收表CAT描述了节目的加密方式，它包含了节目的 <abbr title='EMM（Entitlement Management Message），即授权管理信息。描述了用户可看的节目或时间段、用户的付费等。'>EMM</abbr> 识别PID。
												它给出了一个或多个CA系统、EMM流以及与CA相关的特定参数之间的关系。
											</p>
											<p class='paper'>
												CA描述符既用于规定像EMM这样的系统范围条件接收管理信息，也用于规定像ECM这样的基本流特定信息。
												<ul class='paper'>
													<li>如果一个基本流（Elementary Stream）是加扰的，那么包含该基本流的节目信息PMT中需要一个CA描述符</li>
													<li>如果一个TS流中有任何一个系统范围的条件接收管理信息，则条件接收表中应有CA描述符。</li>
												</ul>
											</p>
											<br>
											
											<h3 id='cat1' class='subtitle-border'>CAT表的结构分析</h3>
											<p class=''>
												下表是CAT结构：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='text-align:center; font-weight:bold; background:#bbb; color:#000;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>conditional_access_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>"0"</td><td>1</td><td>bslbf</td><td>zero</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">段长度，12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>18</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Version_number</td><td>5</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Version_number</h3><p class="pop-text">sub_table的版本号，值为0~31，当sub_table信息改变时，值加1，若值已为31，则变化后值为0（循环），若curren_next_indicator的值为“1”，version_number指当前sub_table,若curren_next_indicator的值为“0”，version_number指下一个sub_table</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Current_next_indicator</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Current_next_indicator</h3><p class="pop-text">当前后续指示符，1位，“1”指sub_table是current, “0”指sub_table是next</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_number</h3><p class="pop-text">段号，8位,给出section号，在sub_table中，第一个section其section_number为"0x00"，每增加一个section，section_number加一</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>last_section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">last_section_number</h3><p class="pop-text">最后段号，sub_table中最后一个section的section_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left; font-weight:bold;'>descriptor()</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>CRC_32</td><td>32</td><td>rpchof</td><td><a data-content='<h3 class="pop-title">CRC_32</h3><p class="pop-text">32位, 表示CRC的值</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<br>
											
											<h3 id='cat2' class='subtitle-border'>CAT表的描述子</h3>
											<p>
												注意到，CAT表中有一个Descriptor():<br>
												<ul class='paper'>
													<li><span class='bold'>CA identifier descriptor</span>：<a href='descriptor.html#ca_identifier_descriptor' target='_blank'>查看！！</a></li>
												</ul>
											</p>
											<br>
											
											<h3 id='cat3' class='subtitle-border'>CAT表实例</h3>
											<p class='paper'>
												下图是一个CAT表的实例：
											</p>
											<a class="feature-image"><img src="../course/images/22.jpg" style="margin-top:-10px" />CAT表一览</a>
										</section>
									
										
										<section id='nit'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>NIT表解析</span></a></h2>
												<p class='light-text'>Parse NIT(Network Information Table)</p>
											</header>
											<blockquote>
												"NIT描述了数字电视网络中与网络相关的信息"
												<footer class='italic'>NIT表主要提供物理网络本身的一些信息。 </footer>
												<footer class='italic'>PID = 0x0010</footer>
												<footer class='italic'>table_id = 0x40 (discribe actual newwork)</footer>
												<footer class='italic'>table_id = 0x41 (discribe not actual newwork)</footer>
											</blockquote>
											<p class='paper'>
												NIT描述了数字电视网络中与网络相关的信息，但这个表本身的信息有限，更多的信息是依靠插入表中的描述符来提供的。
												NIT常用的描述符有：网络名称描述符（network_name_descriptor）、有线传送系统（cable_delivery_system_descriptor）、业务列表描述符（service_list_descriptor）和链接描述符（linkage_descriptor）。
											</p>
											<p class='paper'>
												网络信息表NIT（见表3）传递了与通过一个给定的网络传输的复用流/TS流的物理结构相关的信息，以及与网络自身特性相关的信息。在本标准应用的范围内，original_network_id 和 transport_stream_id 两个标识符相结合唯一确定了网络中的TS流。各网络被分配独立的 network_id值作为网络的唯一识别码。这些码字的分配见ETR 162。当NIT表在生成TS流的网络上传输时，network_id和original_network_id将取同一值。
											</p>
											<p class='paper'>
												传输媒体边界间转换的业务信息处理指南见ETR 211。例如：从卫星系统到有线电视系统或SMATV（卫星公共天线电视）系统。
											</p>
											<p class='paper'>
												当转换频道时，为了使存取时间最小，IRD可以在非易失性存储器上存储NIT表信息。除现行网络外，也可以为其他网络传输NIT表信息。现行网络的NIT表与其他网络的NIT表使用不同的table_id值来区分（见表2）
											</p>
											<br>
											
											<h3 id='nit1' class='subtitle-border'>NIT表的结构分析</h3>
											<p class='paper'>
												NIT表被切分成网络信息段（network_information_section）。任何构成NIT表的段，都要由PID为0x0010的TS包传输。描述现行网络（即包含NIT表的TS所在的网络）的NIT表的任何段的table_id值应为0x40，且具有相同的 table_id_extension （network_id）。现行网络的network_id字段的值的分配见ETR 162。指向一个现行网络之外的其它网络的NIT表的任何段的table_id值应取0x41，network_id字段的值的分配见ETR 162。
											</p>
											<p class='paper'>
												网络信息表（NIT）传递了与通过一个给定的网络传输的复用流/TS流的物理结构相关的信息，以及与网络自身特性相关的信息。下表是NIT结构：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='text-align:center; font-weight:bold; background:#bbb; color:#000;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>network_information_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved_future_use</td><td>1</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">段长度，12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Network_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Network_id</h3><p class="pop-text">网络标识符，16位字段。NIT表所描述的传输系统的网络标识，用以区别其他的传输系统。This is a 16-bit field which serves as a label to identify the delivery system, about which the NIT informs, from any other delivery system.</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Version_number</td><td>5</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Version_number</h3><p class="pop-text">sub_table的版本号，值为0~31，当sub_table信息改变时，值加1，若值已为31，则变化后值为0（循环），若curren_next_indicator的值为“1”，version_number指当前sub_table,若curren_next_indicator的值为“0”，version_number指下一个sub_table</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Current_next_indicator</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Current_next_indicator</h3><p class="pop-text">当前后续指示符，1位，“1”指sub_table是current, “0”指sub_table是next</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_number</h3><p class="pop-text">段号，8位,给出section号，在sub_table中，第一个section其section_number为"0x00"，每增加一个section，section_number加一</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>last_section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">last_section_number</h3><p class="pop-text">最后段号，sub_table中最后一个section的section_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved_future_use</td><td>4</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Network_descriptors_length</td><td>12</td><td>uimsbf</td><td>网络描述符长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='3' style='text-indent:6em; text-align:left; font-weight:bold;'>descriptor()</td><td>First descriptor loop</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>reserved_future_use</td><td>4</td><td>bslbf</td><td>-</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>transport_stream_loop_length</td><td>12</td><td>uimsbf</td><td>传输流循环长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>transport_stream_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">transport_stream_id</h3><p class="pop-text">传输流标识符，16位, 给出TS的识别号</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>original_network_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">original_network_id</h3><p class="pop-text">原始网络标识符，16位，给出originating delivery system中的网络识别号</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>reserved_future_use</td><td>4</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>transport_descriptors_length</td><td>12</td><td>uimsbf</td><td>传输流描述符长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='3' style='text-indent:8em; text-align:left; font-weight:bold;'>descriptor()</td><td>Second descriptor loop</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>}</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>CRC_32</td><td>32</td><td>rpchof</td><td><a data-content='<h3 class="pop-title">CRC_32</h3><p class="pop-text">32位, 表示CRC的值</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<br>
											
											<h3 id='nit2' class='subtitle-border'>NIT表中的描述子</h3>
											<p class='paper'>
												注意到NIT结构里出现了两个循环，分别成为第一层循环和第二层循环；
												每层循环都插入了一个描述符，也就是一共插入了两个描述符。
												这两个描述符的特点如下：
											</p>
											<table class='table table-condensed table-hover table-bordered' style='font-size:70%;'>
												<tbody style='text-align:center;'>
													<tr><td style='background-color:#bbb; color:#000; font-weight:bold;'>第一层描述符</td><td>作用域是针对整个网络的，如插入网络名称描述符、链接描述符等</td></tr>
													<tr><td style='background-color:#bbb; color:#000; font-weight:bold;'>第二层描述符</td><td>作用域是第一层循环所代表的一个TS流，如插入有线传输系统描述符</td></tr>
												</tbody>
											</table>
											<p>
												NIT表各层的Descriptor()包括:<br>
												<ul>
													<span class='bold'>第一层(First descriptor loop)</span><br>
													<li class='paper'><span class=''>Linkage descriptor</span>：<a href='descriptor.html#linkage_descriptor' target='_blank'>查看！！</a></li>
													<li class='paper'><span class=''>Multiligual network name descriptor</span>：<a href='descriptor.html#multiligual_network_name_descriptor' target='_blank'>查看！！</a></li>
													<li class='paper'><span class=''>Network name descriptor</span>：<a href='descriptor.html#network_name_descriptor' target='_blank'>查看！！</a></li>
												</ul>
												<ul>
													<span class='bold'>第二层(Second descriptor loop)</span><br>
													<li class='paper'>Delivery system descriptor：<a href='descriptor.html#delivery_system_descriptor' target='_blank'>查看！！</a></li>
													<li class='paper'><span class=''>Service list descriptor</span>：<a href='descriptor.html#service_list_descriptor' target='_blank'>查看！！</a></li>
													<li class='paper'><span class=''>Frequency list descriptor</span>：<a href='descriptor.html#frequency_list_descriptor' target='_blank'>查看！！</a></li>
												</ul>
											</p>
											<ul class='paper'>
												在SI标准中规定：original_network_id和transport_stream_id两个标识符相结合唯一确定了网络中的TS流。
												各网络被分配独立的network_id值作为网络的唯一识别码。
												当NIT表在生成TS流的网络上传输时，network_id和original_network_id将取同一值。
												此外，NIT表还有如下特点：
												<br>
												<li class='paper'>NIT表被切分为网络信息段（network_information_section）</li>
												<li class='paper'>任何NIT的段都必须由PID为0x0010的TS包传输</li>
												<li class='paper'>现行网络的NIT表任何段的table_id值应为0x40，且具有相同的table_id_extension即（network_id）；</li>
												<li class='paper'>现行网络以外的其他网络NIT表的段table_id值应为0x41</li>
											</ul>
											<br>
											
											<h3 id='nit3' class='subtitle-border'>NIT表实例</h3>
											<p class='paper'>
												在下图中，我们可以看到NIT表的各个信息，如table_id=0x40、network_id=0x3022、NIT版本号(version_number=0x14)等。
												另外，这里也出现了两层共三个描述子，接下来，我们逐个点开描述子来查看相关信息。
											</p>
											<a class="feature-image"><img src="../course/images/12.jpg" style="margin-top:-10px" />NIT表一览</a>
											
											<p>
												<span class='bold'>第一层描述子：network_name_descriptor</span>
												<br>
												下图是第一层的network_name_descriptor描述子。其descriptor_tag=0x40，网络名称(network name)为“T-Systems”。
											</p>
											<a class="feature-image"><img src="../course/images/13.jpg" style="margin-top:-10px" />第一层：network_name_descriptor描述子</a>
											
											<p>
												<span class='bold'>第二层描述子1：地面传输系统描述子terrestrial_delivery_system_descriptor</span>
												<br>
												下图是第二层的第一个描述子terrestrial_delivery_system_descriptor。
												可以看到，该网络的中心频点(center_frequency)为746MHz，带宽为8MHz。
												注意，这个位置的描述子分为cable、satellite和terrestrial三种，长度都为13个字节，这使他们之间的转换变得方便；
												而此案例中，判断描述子是terrestrial的原因，是descriptor_tag的值是0x5a。
												descriptor_tag的值与描述子类型的对应关系如下：
											</p>
											<table class='table table-condensed table-hover table-bordered' style='font-size:70%;'>
												<thead style='text-align:center;'>
													<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>descriptor_tag</td><td>描述子类型</td><td>说明</td></tr>
												</thead>
												<tbody style='text-align:center;'>
													<tr><td>0x43</td><td>satellite_delivery_system_descriptor</td><td>卫星传输系统描述子</td></tr>
													<tr><td>0x44</td><td>cable_delivery_system_descriptor</td><td>有线传输系统描述子</td></tr>
													<tr><td>0x5a</td><td>terrestrial_delivery_system_descriptor</td><td>地面传输系统描述子</td></tr>
												</tbody>
											</table>
											<a class="feature-image"><img src="../course/images/14.jpg" style="margin-top:-10px" />第二层1：terrestrial_delivery_system_descriptor描述子</a>
											
											<p>
												<span class='bold'>第二层描述子2：有线传输系统描述子： cable_delivery_system_descriptor</span>
												<br>
												下图是另一个码流的NIT表，该描述子的descriptor_tag=0x44，即有线传输系统（有线电视），所以其携带的传输系统描述子是cable_delivery_system_descriptor。
												从图中可以看出，该有线电视网络的主频点是259MHz，符码率为6876M，调制方式为64QAM。
												需要说明的是，这里的64QAM并不是直接给出的，而是按照下表的规定(Modulation scheme for cable)发出的代码：
											</p>
											<table class='table table-condensed table-hover table-bordered' style='font-size:70%;'>
												<thead style='text-align:center;'>
													<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>调制方式（十六进制）</td><td>描述</td></tr>
												</thead>
												<tbody style='text-align:center;'>
													<tr><td>0x00</td><td>未定义</td></tr>
													<tr><td>0x01</td><td>16 QAM</td></tr>
													<tr><td>0x02</td><td>32 QAM</td></tr>
													<tr><td>0x03</td><td>64 QAM</td></tr>
													<tr><td>0x04</td><td>128 QAM</td></tr>
													<tr><td>0x05</td><td>256 QAM</td></tr>
													<tr><td>0x06 - 0xFF</td><td>预留使用</td></tr>
												</tbody>
											</table>
											<a class="feature-image"><img src="../course/images/20.jpg" style="margin-top:-10px" />cable_delivery_system_descriptor，有线传输系统描述子</a>
											
											<p>
												<span class='bold'>第二层描述子3：卫星传输系统描述子： satellite_delivery_system_descriptor</span>
												<br>
												下图是另一个码流的NIT表，该描述子的descriptor_tag=0x43，即卫星传输系统，所以其携带的传输系统描述子是satellite_delivery_system_descriptor。
												从图中可以看出，该频点的信息为11554/H/29950。具体分析可参考该描述子专项说明：<a href='descriptor.html' target='_blank'>查看！！</a>
											</p>
											<a class="feature-image"><img src="../course/images/21.jpg" style="margin-top:-10px" />satellite_delivery_system_descriptor，卫星传输系统描述子</a>
											
											<p>
												<span class='bold'>第二层描述子4：业务列表描述子： service_list_descriptor</span>
												<br>
												下图是第二层的第二个描述子service_list_descriptor(业务列表)。它给出了业务根据其id和type排序的一种方式。
												从图中可以看到，该网络的有四个业务，且四个业务均为数字电视业务。
												其节目号(service_id)分别为16403、16408、16394和16398。
												<br><span class='bold'>这里要特别说明的是，service_id 与 PMT表里的program_number相对应（service_type = 0x04 (NVOD reference service)除外）</span>。
											</p>
											<a class="feature-image"><img src="../course/images/15.jpg" style="margin-top:-10px" />第二层2：service_list_descriptor描述子</a>
											
											<p class='paper'>
												上面描述子中，有一个service_type字段，它的值可参照下表Service type coding：
											</p>
											<table class='table table-condensed table-hover table-bordered' style='font-size:70%;'>
												<thead style='text-align:center;'>
													<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>service_type</td><td>说明(中文)</td><td>说明(英文)</td></tr>
												</thead>
												<tbody style='text-align:center;'>
													<tr><td>0x00</td><td>预留使用</td><td>reserved for future use</td></tr>
													<tr><td>0x01</td><td title='查看NOTE1'>数字电视业务</td><td>digital television service</td></tr>
													<tr><td>0x02</td><td title='查看NOTE2'>数字音频广播业务</td><td>digital radio sound service</td></tr>
													<tr><td>0x03</td><td>图文电视业务</td><td>Teletext service</td></tr>
													<tr><td>0x04</td><td title='查看NOTE1'>NVOD参考业务</td><td>NVOD reference service</td></tr>
													<tr><td>0x05</td><td title='查看NOTE1'>NVOD时移业务</td><td>NVOD time-shifted service</td></tr>
													<tr><td>0x06</td><td>马赛克业务</td><td>mosaic service</td></tr>
													<tr><td>0x07</td><td>PAL制编码信号</td><td>reserved for future use</td></tr>
													<tr><td>0x08</td><td>SECAM制编码信号</td><td>reserved for future use</td></tr>
													<tr><td>0x09</td><td>D/D2-MAC</td><td>reserved for future use</td></tr>
													<tr><td>0x0A</td><td>调频广播</td><td>advanced codec digital radio sound servic</td></tr>
													<tr><td>0x0B</td><td>NTSC制信号</td><td>advanced codec mosaic service</td></tr>
													<tr><td>0x0C</td><td>数据广播业务</td><td>data broadcast service</td></tr>
													<tr><td>0x0D</td><td>公共接口使用预留</td><td>reserved for Common Interface Usage (EN 50221 [39])</td></tr>
													<tr><td>0x0E</td><td>RCS映射</td><td>RCS Map (see EN 301 790 [7])</td></tr>
													<tr><td>0x0F</td><td>RCS FLS</td><td>RCS FLS (see EN 301 790 [7])，RCS FLS</td></tr>
													<tr><td>0x10</td><td>DVB MHP业务</td><td>DVB MHP service</td></tr>
													<tr><td>0x11</td><td>预留使用</td><td>MPEG-2 HD digital television service</td></tr>
													<tr><td>0x12 - 0x15</td><td>预留使用</td><td>reserved for future use</td></tr>
													<tr><td>0x16</td><td>预留使用</td><td>advanced codec SD digital television service</td></tr>
													<tr><td>0x17</td><td>预留使用</td><td>advanced codec SD NVOD time-shifted service</td></tr>
													<tr><td>0x18</td><td>预留使用</td><td>advanced codec SD NVOD reference service</td></tr>
													<tr><td>0x19</td><td>预留使用</td><td>advanced codec HD digital television service</td></tr>
													<tr><td>0x1A</td><td>预留使用</td><td>advanced codec HD NVOD time-shifted service</td></tr>
													<tr><td>0x1A</td><td>预留使用</td><td>advanced codec HD NVOD reference service</td></tr>
													<tr><td>0x1C - 0x7F</td><td>预留使用</td><td>reserved for future use</td></tr>
													<tr><td>0x80 - 0xFE</td><td>用户定义</td><td>user defined</td></tr>
													<tr><td>0xFF</td><td>预留使用</td><td>reserved for future use</td></tr>
													<tr style='text-align:left; font-weight:bold;'><td colspan='3'>
														NOTE 1: MPEG-2 SD material should use this type<br>
														NOTE 2: digital radio sound service<br>
													</td></tr>
												</tbody>
											</table>
										</section>
										
											
										<section id='sdt'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>SDT表</span></a></h2>
												<p class='light-text'>Parse SDT(Service Description Table)</p>
											</header>
											<blockquote>
												"SDT描述了业务内容及信息，连接了NIT、EIT和PMT（PSI）"
												<footer>SDT表主要提供关于Service的信息，如Service name，Service provider 等。</footer>
												<footer>这里所说的业务，即Service；CCTV 1是一个Service(我们说“频道”)，湖南卫视也是一个Service</footer>
												<footer>PID = 0x0011</footer>
												<footer>table_id = 0x42 (discribe actual TS,现行TS)</footer>
												<footer>table_id = 0x46 (discribe not actual TS,非现行TS)</footer>
											</blockquote>
											<p class='paper'>
												SDT表被切分成业务描述段（service_description_section），由PID为0x0011的TS包传输（BAT段也由PID为0x0011的TS包传输，但table_id不同）。
											</p>
											<p class='paper'>
												描述现行TS（即包含SDT表的TS）的SDT表的任何段的table_id都为0x42，且具有相同的table_id_extension（transport_stream_id）以及相同的original_network_id。
												指向非现行TS的SDT表的任何段的table_id都应取0x46。
											</p>
											<p class='paper'>
												业务描述表SDT（见下一节的SDT表结构）中的每一个子表，都用来描述包含于一个特定的传输流中的业务。 该业务可能是现行传输流中的一部分，也可能是其他传输流中的一部分，可以根据table_id 来确定区分上述两种情况（见表2）。
											</p>
											<br>
											
											<h3 id='sdt1' class='subtitle-border'>SDT表的结构分析</h3>
											<p class='paper'>
												SDT表被切分成业务描述段（service_description_section）。任何构成SDT表的段，都要由PID为0x0011的TS包传输。描述现行TS（即包含SDT表的TS）的SDT表的任何段的table_id值应为0x42，且具有相同的table_id_extension（tranport_stream_id）以及相同的original_network_id。指向一个现行TS之外的其它TS的SDT表的任何段的table_id值应取0x46。
											</p>
											<p class='paper'>
												下表是SDT结构：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>service_description_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved_future_use</td><td>1</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">段长度，12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>transport_stream_id</td><td>16</td><td>uimsbf</td><td>传输流标识符，给出TS的识别号</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Version_number</td><td>5</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Version_number</h3><p class="pop-text">sub_table的版本号，值为0~31，当sub_table信息改变时，值加1，若值已为31，则变化后值为0（循环），若curren_next_indicator的值为“1”，version_number指当前sub_table,若curren_next_indicator的值为“0”，version_number指下一个sub_table</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Current_next_indicator</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Current_next_indicator</h3><p class="pop-text">当前后续指示符，1位，“1”指sub_table是current, “0”指sub_table是next</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_number</h3><p class="pop-text">段号，8位,给出section号，在sub_table中，第一个section其section_number为"0x00"，每增加一个section，section_number加一</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>last_section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">last_section_number</h3><p class="pop-text">最后段号，sub_table中最后一个section的section_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>original_nerwork_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">original_nerwork_id</h3><p class="pop-text">原始网络标识符，16位，给出originating delivery system中的网络识别号</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>reserved_future_use</td><td>8</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>service_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">service_id</h3><p class="pop-text">业务标识符，16位，用来标识TS中的Service，等同于program_map_section中的program_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>reserved_future_use</td><td>8</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>EIT_schedule_flag</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">EIT_schedule_flag</h3><p class="pop-text">EIT时间表标志，1位，若为“1”，则EIT schedule信息在当前TS中，为“0”，则TS中不存在EIT schedule信息</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>EIT_present_following_flag</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">EIT_present_following_flag</h3><p class="pop-text">EIT当前后续标志，1位，若为“1”，则EIT_present_following 信息在当前TS中，为“0”，则TS中不存在EIT_present_following信息。</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>running_status</td><td>3</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">running_status</h3><p class="pop-text">运行状态，3位，表示service的状态<table class="table table-condensed table-hover" style="width:500px; font-family:Microsoft Yahei; font-size:70%; text-align:center;"><thead><tr style="background:#bbb; color:#000;"><td>值</td><td>含义</td></tr></thead><tr><td>0</td><td>未定义</td></tr><tr><td>1</td><td>未运行</td></tr><tr><td>2</td><td>几秒后开始（如录像）</td></tr><tr><td>3</td><td>暂停</td></tr><tr><td>4</td><td>运行</td></tr><tr><td>5 - 7</td><td>预留使用</td></tr></table></p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>freed_CA_mode</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">freed_CA_mode</h3><p class="pop-text">自由条件接收模式，1位，“0”表示无CA，“1”表示有CA</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>descriptors_loop_length</td><td>12</td><td>uimsbf</td><td>描述符循环长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='3' style='text-indent:8em; text-align:left; font-weight:bold;'>descriptor()</td><td></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>}</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>CRC_32</td><td>32</td><td>rpchof</td><td><a data-content='<h3 class="pop-title">CRC_32</h3><p class="pop-text">32位, 表示CRC的值</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<br>
											
											<h3 id='sdt2' class='subtitle-border'>SDT表的描述子</h3>
											<ul class=''>
												SDT 表中的Descriptor()：
												<br>
												<li class='paper bold'>Bouquet name descriptor：<a href='descriptor.html#bouquet_name_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>CA identifier descriptor：<a href='descriptor.html#ca_identifier_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Country availability descriptor：<a href='descriptor.html#country_availability_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Data broadcast descriptor：<a href='descriptor.html#data_broadcast_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Linkage descriptor：<a href='descriptor.html#linkage_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Mosaic descriptor：<a href='descriptor.html#mosaic_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Multilingual service descriptor：<a href='descriptor.html#multilingual_service_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>NVOD reference descriptor：<a href='descriptor.html#nvod_reference_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Service descriptor：<a href='descriptor.html#service_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Telephone descriptor：<a href='descriptor.html#telephone_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Time shifted service descriptor：<a href='descriptor.html#time_shifted_service_descriptor' target='_blank'>查看！！</a></li>
											</ul>
											<br>
											
											<h3 id='sdt3' class='subtitle-border'>SDT表实例</h3>
											<p class='paper'>
												在下图中，我们可以看到SDT表中的service_id=16403与PMT表中的program_number=0x4013(即16403)是对应的。
												也就是说，通过解析SDT表获取到service_id=16403的节目信息后，可以存储到program_number=0x4013(即16403)的节目信息中。
											</p>
											<a class="feature-image"><img src="../course/images/23.png" style="margin-top:-10px" />SDT表与PMT表的映射关系</a>
											
											<p class='paper'>
												在下图中，我们可以看到SDT表的基本信息。
											</p>
											<a class="feature-image"><img src="../course/images/24.jpg" style="margin-top:-10px" />SDT表和它的业务描述子Service descriptor</a>
											
											
										</section>
										
											
										<section id='eit'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>EIT表</span></a></h2>
												<p class='light-text'>Parse EIT(Event Infomation Table)</p>
											</header>
											<blockquote>
												"EIT按时间顺序提供每一个业务所包含的事件信息"
												<footer>这里所说的事件，即Event；《新闻联播》是一个事件，《焦点访谈》也是一个事件。</footer>
												<footer>举个例子来说，EIT表就是提供了中央一台(CCCT 1)各个时间段的节目列表的</footer>
												<footer>PID = 0x0012</footer>
												<footer>EIT表主要提供关于event的信息，如name, start time, duration等。共有四类EIT:</footer>
												<footer>table_id = 0x4E <span class=''>(actual Transport Stream, present/following event information，当前TS流，当前/后续事件信息)</span></footer>
												<footer>table_id = 0x4F <span class=''>(other Transport Stream, present/following event information，其他TS流，当前/后续事件信息)</span></footer>
												<footer>table_id = 0x50 ~ 0x5F <span class=''>(actual Transport Stream, event schedule information，当前TS流，事件时间表信息)</span></footer>
												<footer>table_id = 0x60 ~ 0x6F <span class=''>(other Transport Stream, event schedule information，其他TS流，事件时间表信息)</span></footer>
											</blockquote>
											<p class='paper'>
												EIT即事件信息表（Event Information Table），它是EPG中绝大部分信息的携带者。
												事实上，EPG主要就是通过SDT和EIT信息的获取和重组实现的。
												SDT只提供了频道信息，而EIT则提供各频道下的所有节目的信息。
												EIT的主要信息也是通过插入的描述符来实现的。
												EIT按照时间顺序提供每一个业务所包含的事件的相关信息（如节目名称、节目简介）。
											</p>
											<p class='paper'>
												描述现行TS（即包含SDT表的TS）的SDT表的任何段的table_id都为0x42，且具有相同的table_id_extension（transport_stream_id）以及相同的original_network_id。
												指向非现行TS的SDT表的任何段的table_id都应取0x46。
											</p>
											<p class='paper'>
												除准视频点播（NVOD）业务之外，当前/后续表中只包含在现行传输流或其他传输流中指定业务的当前事件和按时间顺序排列的后续事件的信息，因为NVOD业务可能包含两个以上的事件描述。无论是对现行传输流还是其他传输流，事件时间表都包含了以时间表的形式出现的事件列表，这些事件包括下一个事件之后的一些事件。EIT时间表是可选的，事件信息按时间顺序排列。
											</p>
											<br>
											
											<h3 id='eit1' class='subtitle-border'>EIT表的结构分析</h3>
											<p class=''>
												EIT表被切分成事件信息段。任何构成EIT表的段，都要由PID为0x0012的TS包传输。下表是EIT结构：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>event_information_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved_future_use</td><td>1</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">段长度，12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>service_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">service_id</h3><p class="pop-text">业务标识符，16位，用来标识TS中的Service，等同于program_map_section中的program_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Version_number</td><td>5</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Version_number</h3><p class="pop-text">sub_table的版本号，值为0~31，当sub_table信息改变时，值加1，若值已为31，则变化后值为0（循环），若curren_next_indicator的值为“1”，version_number指当前sub_table,若curren_next_indicator的值为“0”，version_number指下一个sub_table</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Current_next_indicator</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Current_next_indicator</h3><p class="pop-text">当前后续指示符，1位，“1”指sub_table是current, “0”指sub_table是next</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_number</h3><p class="pop-text">段号，8位,给出section号，在sub_table中，第一个section其section_number为"0x00"，每增加一个section，section_number加一</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>last_section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">last_section_number</h3><p class="pop-text">最后段号，sub_table中最后一个section的section_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>transport_stream_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">transport_stream_id</h3><p class="pop-text">传输流标识符，16位，给出TS的识别号</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>original_nerwork_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">original_nerwork_id</h3><p class="pop-text">原始网络标识符，16位，给出originating delivery system中的网络识别号</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>segment_last_section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">segment_last_section_number</h3><p class="pop-text">片段最后段号，8位，其值为本段（segment）中last section的number，若sub_table没有分段（segmented）其值等于last_section_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>last_table_id</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">last_table_id</h3><p class="pop-text">尾表标识符，8位字段，指示所使用的最后一个table_id（见表2）。如果只使用一个表，置为该表的table_id的值。连续的table_id值保证了信息按时间排序。8-bits, identifies the last table_id used (see Table 2). If only one table is used this is set to the table_id of this table</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>event_id</td><td>16</td><td>uimsbf</td><td>事件标识符</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>start_time</td><td>40</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">start_time</h3><p class="pop-text">起始时间，40位，包含以UTC和MJD形式表示的事件的起始时间及日期（见附录C）。</p><p class="pop-text">此字段前16位表示MJD日期码，其余24位按4位BCD编码，表示6个数字。如果事件起始时间未定，则所有位都置为“1”（例如，对NOVD业务中的一个事件）。</p><p class="pop-text">如果开始时间未定义，则所有位置为"1"。例如93/10/13 12:45:00 表示为 "0xC079124500"</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>duration</td><td>24</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">duration</h3><p class="pop-text">event的持续时间，用时、分、秒表示。</p><p class="pop-text">例如：01:45:30 表示为 "0x014530"</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>running_status</td><td>3</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">running_status</h3><p class="pop-text">运行状态，3位，表示service的状态<table class="table table-condensed table-bordered" style="width:500px; font-family:Microsoft Yahei; font-size:70%; text-align:center;"><thead><tr style="background:#bbb; color:#000;"><td>值</td><td>含义</td></tr><tr></thead><td>0</td><td>未定义</td></tr><tr><td>1</td><td>未运行</td></tr><tr><td>2</td><td>几秒后开始（如录像）</td></tr><tr><td>3</td><td>暂停</td></tr><tr><td>4</td><td>运行</td></tr><tr><td>5 - 7</td><td>预留使用</td></tr></table></p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>freed_CA_mode</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">freed_CA_mode</h3><p class="pop-text">自由条件接收模式，1位，“0”表示无CA，“1”表示有CA</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>descriptors_loop_length</td><td>12</td><td>uimsbf</td><td>描述符循环长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='3' style='text-indent:8em; text-align:left; font-weight:bold;'>descriptor()</td><td></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>}</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>CRC_32</td><td>32</td><td>rpchof</td><td><a data-content='<h3 class="pop-title">CRC_32</h3><p class="pop-text">32位, 表示CRC的值</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<br>
											
											<h3 id='eit2' class='subtitle-border'>EIT表的描述子</h3>
											<ul class=''>
												EIT表中的Descriptor()：
												<br>
												<li class='paper bold'>Component descriptor：<a href='descriptor.html#component_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Content descriptor：<a href='descriptor.html#content_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Data broadcast descriptor：<a href='descriptor.html#data_broadcast_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Extended event descriptor：<a href='descriptor.html#extended_event_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Linkage descriptor：<a href='descriptor.html#linkage_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Multilingual component descriptor：<a href='descriptor.html#multilingual_component_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Parental rating descriptor：<a href='descriptor.html#parental_rating_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Short event descriptor：<a href='descriptor.html#short_event_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Telephone descriptor：<a href='descriptor.html#telephone_descriptor' target='_blank'>查看！！</a></li>
												<li class='paper bold'>Time shifted event descriptor：<a href='descriptor.html#time_shifted_event_descriptor' target='_blank'>查看！！</a></li>
											</ul>
											<br>
											
											<h3 id='eit3' class='subtitle-border'>EIT表实例</h3>
											<p class='paper'>
												在下图中，两个部分的EIT信息都是针对当前的TS流(其table_id分别是0x4e和0x50，都是actual的EIT信息)。
												其中，第一部分是针对当前TS流程中各业务的当前/后续事件信息(table_id=0x4e)；
												第二部分是针对当前TS流中各业务的事件时间表信息。
											</p>
											<a class="feature-image"><img src="../course/images/25.jpg" style="margin-top:-10px" />EIT表中的当前TS流信息</a>
											
											<p class='paper'>
												在下图中，红框内的信息即为一个EIT表的基本信息。这里的EIT表是当前TS流当前事件的EIT信息。
											</p>
											<p class='paper'>
												我们看的事件描述的描述子里，开始时间start_time为“2006/11/30 07:52:00”，
												持续时间duration为“01:02:00”，
												状态running_status为0x4(即running)，
												CA模式free_CA_mode为0x0(即free)。
											</p>
											<a class="feature-image"><img src="../course/images/26.jpg" style="margin-top:-10px" />EIT表的基本信息和一个事件的描述</a>
											
											<p class='paper'>
												除了这些基本的事件信息，我们还可以继续往下一层的描述子查看更多信息。
											</p>
											<p class='paper'>
												如下图所示，这里有短事件描述子short_event_descriptor，它以文本方式提供了事件名称和该事件的简短描述；下图中，我们可以看到事件的编码为“DEU”(德语)，以及事件名称。
											</p>
											<p class='paper'>
												此外，还有拓展事件描述子extended_event_descriptor；它给出了一个事件的详细文本描述。如果一个事件的信息长度超过256字节，可以使用多于一个相关联的扩展事件描述符来描述。文本信息可以分为两个栏目，一栏为条目的描述，另一栏为条目的内容。
											</p>
											<a class="feature-image"><img src="../course/images/27.jpg" style="margin-top:-10px" />EIT表中一个事件的详细</a>
											
										</section>
										
										
											
										<section id='tdt'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>TDT表</span></a></h2>
												<p class='light-text'>Parse TDT(Time & Date Table)</p>
											</header>
											<blockquote>
												"TDT仅传送UTC时间和日期信息，只有一个段"
												<footer>TDT为时间和日期表（Time&Date Table），它仅传送UTC时间和日期信息。</footer>
												<footer>PID = 0x0014</footer>
												<footer>table_id = 0x70</footer>
											</blockquote>
											
											<h3 id='tdt1' class='subtitle-border'>TDT表的结构分析</h3>
											<p class=''>
												TDT仅包含一个段，其结构如下：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>time_date_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved_future_use</td><td>1</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">段长度，12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>UTC_time</td><td>40</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">UTC_time</h3><p class="pop-text">UTC时间，40位，包含了当前时间和日期(UTC)，头16位表示日期(16 LSBs of MJD)，后24位表示时间。</p><p class="pop-text">例如: 93/10/13 12:45:00表示为：“0xC079124500”</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<p class="paper">40位，包含了当前时间和日期(UTC)，头16位表示日期(16 LSBs of MJD)，后24位表示时间。</p>
											<p class="paper">例如: 93/10/13 12:45:00表示为：“0xC079124500”</p>
											<br>
											
											<h3 id='tdt2' class='subtitle-border'>TDT表实例</h3>
											<p class='paper'>
												下图可以看到，时间和日期是：2006/11/30 08:02:04
											</p>
											<a class="feature-image"><img src="../course/images/28.jpg" style="margin-top:-10px" />TDT表</a>
											
										</section>
										
											
										<section id='tot'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>TOT表</span></a></h2>
												<p class='light-text'>Parse TOT(Time Offset Table)</p>
											</header>
											<blockquote>
												"TOT是TDT的一个扩展，增加了一个描述符"
												<footer>TOT表提供了UTC时间和日期信息，以及和本地时间的时差。</footer>
												<footer>它包含了UTC时间和日期信息，以及当地时间偏移（时差）等信息</footer>
												<footer>PID = 0x0014</footer>
												<footer>table_id = 0x73</footer>
											</blockquote>
											<br>
											
											<h3 id='tot1' class='subtitle-border'>TOT表的结构分析</h3>
											<p class=''>
												TOT表结构如下：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%;text-align:center;'>
													<thead>
														<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>time_date_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved_future_use</td><td>1</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>UTC_time</td><td>40</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">UTC_time</h3><p class="pop-text">UTC时间，40位，包含了当前时间和日期(UTC)，头16位表示日期(16 LSBs of MJD)，后24位表示时间。</p><p class="pop-text">例如: 93/10/13 12:45:00表示为：“0xC079124500”</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>descriptors_loop_length</td><td>12</td><td>uimsbf</td><td>描述符循环长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='3' style='text-indent:6em; text-align:left; font-weight:bold;'>descriptor()</td><td></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>CRC_32</td><td>32</td><td>rpchof</td><td><a data-content='<h3 class="pop-title">CRC_32</h3><p class="pop-text">32位, 表示CRC的值</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<br>
											
											<h3 id='tot2' class='subtitle-border'>TOT表的描述子</h3>
											<p class="paper">注意到，这里的UTC_time和TDT表的UTC_time是一致的，都是以UTC和MJD形式表示当前时间和日期；其格式也与TDT的UTC_time相同，这里不再赘述。</p>
											<ul class=''>
												TOT表中的Descriptor()：
												<br>
												<li class='paper bold'>Local time offset descriptor：<a href='descriptor.html#local_time_offset_descriptor' target='_blank'>查看！！</a></li>
											</ul>
											<br>
											
											<h3 id='tot3' class='subtitle-border'>TOT表实例</h3>
											<p class='paper'>
												下图可以看到，前面部分和TDT表是一致的，只是后面多了一个描述子。从local_time_offset字段可以看出，该地区的时区是东一区，即UTC+1。
											</p>
											<a class="feature-image"><img src="../course/images/29.jpg" style="margin-top:-10px" />TDT表</a>
											
											<p>
												<span class='bold'>国家代码  country_code</span>
												<br>
												24位字段，按照ISO 3166用3字符代码指明国家。
												每个字符根据GB/T 15273.1-1994编码为8位，并依次插入24位字段。
												假设3个字符代表了一个900至999的数字，那么country_code指定了一组ETSI定义的国家。
												其分配见ETR 162。国家组的国家代码应该被限制在同一时区内。
												例如：英国由3字符代码“GBR”表示，编码为：“01000111 0100 0010 0101 0010”。
											</p>
											
											<p>
												<span class='bold'>国家区域标识符  country_region_id</span>
												<br>
												6位字段，表示country_code指明的国家所在的时区。若国家内部里没有时差，则置“000000”。
											</p>
											<table class='table table-condensed table-hover table-bordered' style='font-size:70%;'>
												<thead style='text-align:center;'>
													<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>country_region_id</td><td>描述</td></tr>
												</thead>
												<tbody style='text-align:center;'>
													<tr><td>00 0000</td><td>未使用时区扩展</td></tr>
													<tr><td>00 0001</td><td>时区1（最东部）</td></tr>
													<tr><td>00 0010</td><td>时区2</td></tr>
													<tr><td>00 0011</td><td>时区3</td></tr>
													<tr><td>...</td><td>...</td></tr>
													<tr><td>11 1100</td><td>时区60</td></tr>
													<tr><td>11 1101 – 11 1111</td><td>预留</td></tr>
												</tbody>
											</table>
											
											<p>
												<span class='bold'>本地时间偏移极性 local_time_offset_polarity</span>
												<br>
												1位字段，用于指明随后的local_time_offset的极性。
												置“0”时，极性为正，说明本地时间早于UTC时间（通常在格林威治以东）；置“1”时，极性为负，说明本地时间晚于UTC时间。
											</p>
											
											<p>
												<span class='bold'>本地时间偏移 local_time_offset</span>
												<br>
												16位字段，指出由country_code和country_region_id确定的区域的相对于UTC的时间偏移，范围为-12小时至+13小时。
												16比特含有4个4位BCD码，顺序为小时的十位，小时的个位，分的十位，分的个位。
											</p>
											
											<p>
												<span class='bold'>时间变化  time_of_change</span>
												<br>
												40位字段，指明时间改变时当前的日期（MJD）与时间（UTC），见附录C。
												该字段分为两部分，前16位给出了LSB格式的日期（MJD），后24位给出了UTC时间（6个4位BCD码）。
											</p>
											
											<p>
												<span class='bold'>下一时间偏移  next_time_offset</span>
												<br>
												16位字段，指出由country_code和country_region_id确定的区域，当UTC时间变化时的下一个时间偏移，范围为-12小时至+13小时。
												此16比特域为4个4位BCD码，依次为时的十位，时的个位，分的十位，分的个位。
											</p>
											
										</section>
										
											
										<section id='bat'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>BAT表</span></a></h2>
												<p class='light-text'>Parse BAT(Bouquet Association Table)</p>
											</header>
											<blockquote>
												"BAT将网络中的所有业务分成了多个业务群，以此界定用户"
												<footer>BAT表主要提供关于Bouquet的信息，Bouquet是一个services的集合。</footer>
												<footer>PID = 0x0011 <span class='light-text'>(和SDT相同，通过table_id区分)</span></footer>
												<footer>table_id = 0x4A</footer>
											</blockquote>
											<p class='paper'>
												BAT即业务群关联表（BouquetAssociation Table），它将网络中所有的业务分成了多个业务群，以此界定用户。
												例如，将网络中所有业务分为两个业务群，一个是境内节目业务群，另一个是境外节目业务群。
												这样，国内的运营商就可以利用这样划分的业务群，充分利用节目资源，在不违反现有广电总局规定的前提下，同时分别满足境内用户和境外用户。
											</p>
											<p class='paper'>
												BAT本身可以跨网络存在，但在国内运营体系来看几乎没有得到真正使用。
												国内的运营使用中，BAT还可以存在分级运营的运营体系中，用于区分不同的地域用户。
											</p>
											<br>
											
											<h3 id='bat1' class='subtitle-border'>BAT表的结构分析</h3>
											<p class='paper'>
												BAT表被切分成业务群关联段。BAT中的任何段都在TS包中传输，其PID值为0x0011。BAT表中描述特定的业务群的子表的段，要具有bouqet_id字段，取值分配见ETR162。所有BAT段的table_id值都取为0x4A。
											</p>
											<p class='paper'>
												BAT表结构如下：
											</p>
											<div class='table-responsive'>
												<table class='table table-condensed table-hover' style='margin-top:-5px; font-size:70%; text-align:center;'>
													<thead>
														<tr style='background-color:#bbb; color:#000; font-weight:bold;'><td>Syntax(句法结构)</td><td>No. of bits(所占位数)</td><td>Identifier(识别符)</td><td>Note(注释)</td></tr>
													</thead>
													<tr style='text-align:left; font-weight:bold;'><td colspan='4'>network_information_section(){</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>table_id</td><td>8</td><td>uimsbf</td><td>表标识符</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_syntax_indicator</td><td>1</td><td>bslbf</td><td>段语法指示符，通常设置为“1”</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved_future_use</td><td>1</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_length</td><td>12</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_length</h3><p class="pop-text">段长度，12位，指出了此Section的长度，头两位为“00”，值不超过1021</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>bouquet_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">bouquet_id</h3><p class="pop-text">业务群标识符，16位，用于标识业务群。该字段值的分配见ETR 162</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved</td><td>2</td><td>bslbf</td><td class='light-text'>保留</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Version_number</td><td>5</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Version_number</h3><p class="pop-text">sub_table的版本号，值为0~31，当sub_table信息改变时，值加1，若值已为31，则变化后值为0（循环），若curren_next_indicator的值为“1”，version_number指当前sub_table,若curren_next_indicator的值为“0”，version_number指下一个sub_table</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Current_next_indicator</td><td>1</td><td>bslbf</td><td><a data-content='<h3 class="pop-title">Current_next_indicator</h3><p class="pop-text">当前后续指示符，1位，“1”指sub_table是current, “0”指sub_table是next</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">Section_number</h3><p class="pop-text">段号，8位,给出section号，在sub_table中，第一个section其section_number为"0x00"，每增加一个section，section_number加一</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>last_section_number</td><td>8</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">last_section_number</h3><p class="pop-text">最后段号，sub_table中最后一个section的section_number</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>Reserved_future_use</td><td>4</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>bouquet_descriptors_length</td><td>12</td><td>uimsbf</td><td>业务群描述符长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='3' style='text-indent:6em; text-align:left; font-weight:bold;'>descriptor()</td><td>First descriptor loop</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>reserved_future_use</td><td>4</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>transport_stream_loop_length</td><td>12</td><td>uimsbf</td><td>传输流循环长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>transport_stream_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">transport_stream_id</h3><p class="pop-text">传输流标识符，16位, 给出TS的识别号</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>original_network_id</td><td>16</td><td>uimsbf</td><td><a data-content='<h3 class="pop-title">original_network_id</h3><p class="pop-text">原始网络标识符，16位，给出originating delivery system中的网络识别号</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>reserved_future_use</td><td>4</td><td>bslbf</td><td class='light-text'>预留使用</td></tr>
													<tr><td style='text-indent:6em; text-align:left;'>transport_descriptors_length</td><td>12</td><td>uimsbf</td><td>传输流描述符长度</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>for(i=0;i&lt;N;i++){</td></tr>
													<tr style='text-align:left;'><td colspan='3' style='text-indent:8em; text-align:left; font-weight:bold;'>descriptor()</td><td>Second descriptor loop</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:6em; text-align:left;'>}</td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-indent:4em; text-align:left;'>}</td></tr>
													<tr><td style='text-indent:4em; text-align:left;'>CRC_32</td><td>32</td><td>rpchof</td><td><a data-content='<h3 class="pop-title">CRC_32</h3><p class="pop-text">32位, 表示CRC的值</p>' style='cursor:pointer;' data-toggle="popover" data-placement="left" data-trigger="click" data-html='true'>注释</a></td></tr>
													<tr style='text-align:left;'><td colspan='4' style='text-align:left;'>}</td></tr>
												</table>
											</div>
											<br>
											
											<h3 id='bat2' class='subtitle-border'>BAT表的描述子</h3>
											<p class="">对比NIT表的结构，BAT表和NIT表在结构上是一样的。BAT表也有两层的描述子。</p>
											<p>
												BAT表各层的Descriptor()包括:<br>
												<ul>
													<span class='bold'>第一层(First descriptor loop)</span><br>
													<li class='paper'><span class=''>Bouquet name descriptor</span>：<a href='descriptor.html#bouquet_name_descriptor' target='_blank'>查看！！</a></li>
													<li class='paper'><span class=''>CA identifier descriptor</span>：<a href='descriptor.html#ca_identifier_descriptor' target='_blank'>查看！！</a></li>
													<li class='paper'><span class=''>Country availability descriptor</span>：<a href='descriptor.html#country_availability_descriptor' target='_blank'>查看！！</a></li>
													<li class='paper'><span class=''>Linkage descriptor</span>：<a href='descriptor.html#linkage_descriptor' target='_blank'>查看！！</a></li>
													<li class='paper'><span class=''>Multiligual bouquet name descriptor</span>：<a href='descriptor.html#multiligual_bouquet_name_descriptor' target='_blank'>查看！！</a></li>
												</ul>
												<ul>
													<span class='bold'>第二层(Second descriptor loop)</span><br>
													<li class='paper'>Service list descriptor：<a href='descriptor.html#service_list_descriptor' target='_blank'>查看！！</a></li>
												</ul>
											</p>
											<br>
											
											<h3 id='bat3' class='subtitle-border'>BAT表实例</h3>
											<p class='paper'>
												下图中，可以看到bouquet_name_descriptor的bouquet_name为“Fransat SD”。
											</p>
											<a class="feature-image"><img src="../course/images/31.jpg" style="margin-top:-10px" />BAT表</a>
												
										</section>
										
									
										
										<section id='partz'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>本章小结</span></a></h2>
												<p class='light-text'>Summary</p>
											</header>
											<p class='paper'>
												本资料来源于规范的资料，如有疏漏，请以European Standard提供的英文文档《En300468.V1.7.1_Specification for SI in DVB Systems》
												和国家广播电影电视总局提供的中文文档《数字视频广播中文业务信息规范》为准。
												如果这两者有冲突，以英文文档为准。
											</p>
										</section>
									
										
										<section id='party'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>参考文档</span></a></h2>
												<p class='light-text'>References</p>
											</header>
											<table class='table table-condensed table-hover table-bordered' style='font-size:70%;'>
												<thead>
													<tr style='background:#bbb; color:#000; text-align:center;'><td>#</td><td>文档名称</td><td>作者</td></tr>
												</thead>
												<tbody style='text-align:center;'>
													<tr><td>1</td><td><a href='../course/prereading.html' target='_blank'>《PSI/SI教程：第一章：预备知识》</a></td><td>林晓州</td></tr>
													<tr><td>2</td><td><a href='../course/begin.html' target='_blank'>《PSI/SI教程：第二章：从TS到PAT和PMT》</a></td><td>林晓州</td></tr>
													<tr><td>3</td><td><a href='../course/psi.html' target='_blank'>《PSI/SI教程：第三章：深入学习PSI》</a></td><td>林晓州</td></tr>
													<tr><td>4</td><td><a href='../course/si.html' target='_blank'>《PSI/SI教程：第四章：深入学习SI》</a></td><td>林晓州</td></tr>
													<tr><td>5</td><td><a href='../doc/En300468.V1.7.1_Specification for SI in DVB Systems.pdf' target='_blank'>《En300468.V1.7.1_Specification for SI in DVB Systems》</a></td><td>European Standard</td></tr>
													<tr><td>6</td><td><a href='../doc/DVB和MPEG-II中的表格.html' target='_blank'>DVB和MPEG-II中的表格</a></td><td>网络</td></tr>
													<tr><td>7</td><td><a href='../doc/中文SI版本1.0.doc' target='_blank'>《数字视频广播中文业务信息规范》</a></td><td>国家广播电影电视总局</td></tr>
												</tbody>
											</table>
										</section>
									
										
										<section id='partx'>
											<header>
												<h2 class='title-border'><a><span class='titleName'>版本信息</span></a></h2>
												<p class='light-text'>Version Information</p>
											</header>
											<table class='table table-condensed table-hover table-bordered' style='font-size:70%;'>
												<thead>
													<tr style='background:#bbb; color:#000; text-align:center;'><td>#</td><td>发布日期</td><td>版本</td><td>更新内容</td><td>作者</td><td>审核</td></tr>
												</thead>
												<tbody style='text-align:center;'>
													<tr><td>1</td><td>2016年02月24日</td><td>V1.0</td><td>主要参考《PSI/SI教程：第三章：深入学习PSI》和《PSI/SI教程：第四章：深入学习SI》整理出该文档</a></td><td>林晓州</td><td>——</td></tr>
												</tbody>
											</table>
										</section>

								</div>
							</div>
						</div>
					</div>
				</div>

			<!-- Footer -->
			<div id="footer-wrapper">
				<footer id="footer" class="container">
					<div class="row">
						<div class="6u 12u(mobile)">

							<!-- Links -->
								<section>
									<h2>友情链接</h2>
									<div>
										<div class="row">
											<div class="4u 12u(mobile)">
												<ul class="link-list last-child">
													<li><a href="http://www.onelib.biz/konka">海外软件研发资料库</a></li>
													<li><a href="http://www.konka.com">康佳集团股份有限公司</a></li>
												</ul>
											</div>
											<div class="4u 12u(mobile)">
												<ul class="link-list last-child">
													<li><a href="http://www.onelib.biz/">OneLib智库</a></li>
													<li><a href="http://www.onelib.biz/tasks">OneLib · 工作</a></li>
												</ul>
											</div>
											<div class="4u 12u(mobile)">
												<ul class="link-list last-child">
													<li><a href="http://html5up.net/">HTML5UP</a></li>
													<li><a href="http://html5up.net/halcyonic">本页模板：Halcyonic</a></li>
												</ul>
											</div>
										</div>
									</div>
								</section>

						</div>
						<div class="6u 12u(mobile)">

							<!-- Blurb -->
								<section>
									<h2>PSI/SI专题 简介</h2>
									<p>
										此专题根据我在2013年自学PSI/SI相关资料所做的学习笔记(参考<a href='http://blog.csdn.net/kkdestiny' target='_blank'>KKDestiny的博客</a>)，
										并在2016年2月17日开始再次深入学习。
										在本次学习过程中，对以前的笔记做了勘误和补充，并增加了2013年至今(2016年)工作中的一些理解。
										<br><span class='not-select'>——</span> 林晓州，2016年02月17日 于深圳
									</p>
								</section>

						</div>
					</div>
				</footer>
			</div>

			
			<!-- Copyright -->
			<div id="copyright">
				&copy;<a href="http://www.onelib.biz">OneLib智库</a> · 分享知识和经验，打造精品智库平台</a>
			</div>

		</div>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/skel.min.js"></script>
			<script src="../assets/js/skel-viewport.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="../assets/js/main.js"></script>
			
			<script src="../assets/js/bootstrap.min.js"></script>
			
			<script>
				$(document).ready(function () {
					$("#ol_tasklist_guide").affix({
						offset: {
							top: 1000
						}
					});
				
					$(function () {
					  $('[data-toggle="popover"]').popover()
					})

				});
			</script>

	</body>
</html>